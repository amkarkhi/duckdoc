{{ define "layout" }}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DuckDoc - API Documentation</title>
    <link rel="icon" type="image/x-icon" href="/static/duckdoclogo.ico" />
    <link rel="stylesheet" href="/static/styles.css" />
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5.10.3/swagger-ui.css" />
    <script src="/static/sidebar.js" defer></script>
    <style>
      /* Swagger UI container customization */
      .swagger-container {
        width: 100%;
        height: 100%;
        overflow-y: auto;
        padding: 0 !important;
      }

      /* Override Swagger UI styles - Fully Responsive */
      .swagger-ui {
        font-family: var(--font-family-mono) !important;
        max-width: 100%;
        margin: 0 auto;
        padding: 24px 20px !important;
        font-size: 14px !important;
        line-height: 1.6 !important;
      }

      @media (min-width: 768px) {
        .swagger-ui {
          padding: 32px 40px !important;
          font-size: 15px !important;
        }
      }

      @media (min-width: 1200px) {
        .swagger-ui {
          max-width: 1400px;
          padding: 40px 60px !important;
        }
      }

      .swagger-ui .topbar {
        display: none !important;
      }

      .swagger-ui {
        background: transparent;
        color: var(--text-primary);
      }

      .swagger-ui .wrapper {
        padding: 0 !important;
      }

      /* Clean Info Section - Light Theme */
      .swagger-ui .info {
        background: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
        border-radius: 12px !important;
        padding: 28px 24px !important;
        margin-bottom: 32px !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04) !important;
        position: relative;
      }

      @media (min-width: 768px) {
        .swagger-ui .info {
          padding: 36px 40px !important;
        }
      }

      [data-theme="dark"] .swagger-ui .info {
        background: var(--bg-secondary) !important;
        border-color: var(--border-color) !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2) !important;
      }

      .swagger-ui .info::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: var(--accent-gradient);
        border-radius: 12px 12px 0 0;
      }

      .swagger-ui .info .title {
        color: var(--text-accent) !important;
        font-family: var(--font-family-mono) !important;
        font-size: 1.8em !important;
        font-weight: 700 !important;
        margin-bottom: 12px !important;
        margin-top: 0 !important;
        line-height: 1.3 !important;
      }

      @media (min-width: 768px) {
        .swagger-ui .info .title {
          font-size: 2.2em !important;
        }
      }

      .swagger-ui .info .description {
        color: var(--text-secondary) !important;
        font-size: 1em !important;
        line-height: 1.7 !important;
        margin-bottom: 0 !important;
      }

      .swagger-ui .info .description p {
        margin-bottom: 12px !important;
      }

      .swagger-ui .info .description p:last-child {
        margin-bottom: 0 !important;
      }

      .swagger-ui .info a {
        color: var(--text-link) !important;
        text-decoration: none;
        border-bottom: 1px solid var(--text-link);
        transition: all 0.2s ease;
      }

      .swagger-ui .info a:hover {
        color: var(--text-accent) !important;
        border-bottom-color: var(--text-accent);
      }

      .swagger-ui .info .version {
        display: inline-block !important;
        background: var(--text-accent) !important;
        color: white !important;
        padding: 4px 12px !important;
        border-radius: 16px !important;
        font-size: 12px !important;
        font-weight: 600 !important;
        margin-left: 12px !important;
        vertical-align: middle !important;
      }

      /* Clean Servers Section */
      .swagger-ui .servers {
        margin-bottom: 24px !important;
        padding: 20px !important;
        background: var(--bg-secondary) !important;
        border-radius: 8px !important;
        border: 1px solid var(--border-color) !important;
      }

      [data-theme="dark"] .swagger-ui .servers {
        background: var(--bg-secondary) !important;
        border-color: var(--border-color) !important;
      }

      .swagger-ui .servers > label {
        color: var(--text-accent) !important;
        font-weight: 600 !important;
        font-size: 1em !important;
        margin-bottom: 12px !important;
        display: block !important;
      }

      .swagger-ui .servers select {
        background: var(--input-bg) !important;
        border: 1px solid var(--border-color) !important;
        color: var(--text-primary) !important;
        padding: 10px 16px !important;
        padding-right: 36px !important;
        border-radius: 6px !important;
        font-family: var(--font-family-mono) !important;
        font-size: 14px !important;
        transition: all 0.2s ease !important;
        cursor: pointer !important;
        width: 100% !important;
        appearance: none !important;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' viewBox='0 0 10 10'%3E%3Cpath fill='%23a855f7' d='M5 7L1 3h8z'/%3E%3C/svg%3E") !important;
        background-repeat: no-repeat !important;
        background-position: right 12px center !important;
      }

      [data-theme="dark"] .swagger-ui .servers select {
        background-color: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
      }

      .swagger-ui .servers select:hover {
        border-color: var(--text-accent) !important;
      }

      .swagger-ui .servers select:focus {
        outline: none !important;
        border-color: var(--text-accent) !important;
        box-shadow: 0 0 0 3px var(--bg-hover) !important;
      }

      /* Clean Operation Blocks */
      .swagger-ui .opblock {
        border: 1px solid var(--border-color) !important;
        background: var(--bg-secondary) !important;
        border-radius: 8px !important;
        margin-bottom: 16px !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06) !important;
        transition: all 0.2s ease !important;
        overflow: hidden !important;
        position: relative !important;
      }

      @media (min-width: 768px) {
        .swagger-ui .opblock {
          border-radius: 10px !important;
          margin-bottom: 20px !important;
        }
      }

      [data-theme="dark"] .swagger-ui .opblock {
        background: var(--bg-secondary) !important;
        border-color: var(--border-color) !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) !important;
      }

      .swagger-ui .opblock::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 4px;
      }

      .swagger-ui .opblock:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
        transform: translateY(-1px) !important;
      }

      [data-theme="dark"] .swagger-ui .opblock:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
      }

      /* Light theme colors */
      .swagger-ui .opblock.opblock-get::before {
        background: #61affe !important;
      }

      .swagger-ui .opblock.opblock-post::before {
        background: #49cc90 !important;
      }

      .swagger-ui .opblock.opblock-put::before {
        background: #fca130 !important;
      }

      .swagger-ui .opblock.opblock-delete::before {
        background: #f93e3e !important;
      }

      .swagger-ui .opblock.opblock-patch::before {
        background: #50e3c2 !important;
      }

      /* Dark theme adjustments */
      [data-theme="dark"] .swagger-ui .opblock.opblock-get::before {
        background: #4a9ee8 !important;
      }

      [data-theme="dark"] .swagger-ui .opblock.opblock-post::before {
        background: #3db87d !important;
      }

      [data-theme="dark"] .swagger-ui .opblock.opblock-put::before {
        background: #e89020 !important;
      }

      [data-theme="dark"] .swagger-ui .opblock.opblock-delete::before {
        background: #e32e2e !important;
      }

      [data-theme="dark"] .swagger-ui .opblock.opblock-patch::before {
        background: #40d3b2 !important;
      }

      /* Clean Operation Summary */
      .swagger-ui .opblock-summary {
        padding: 14px 16px !important;
        padding-left: 20px !important;
        align-items: center !important;
        cursor: pointer !important;
        transition: background 0.2s ease !important;
      }

      @media (min-width: 768px) {
        .swagger-ui .opblock-summary {
          padding: 16px 20px !important;
          padding-left: 24px !important;
        }
      }

      .swagger-ui .opblock-summary:hover {
        background: var(--bg-hover) !important;
      }

      .swagger-ui .opblock-summary-method {
        font-family: var(--font-family-mono) !important;
        font-weight: 700 !important;
        font-size: 11px !important;
        border-radius: 4px !important;
        padding: 6px 10px !important;
        min-width: 60px !important;
        text-align: center !important;
        text-transform: uppercase !important;
        border: none !important;
      }

      @media (min-width: 768px) {
        .swagger-ui .opblock-summary-method {
          font-size: 12px !important;
          padding: 7px 14px !important;
          min-width: 70px !important;
        }
      }

      .swagger-ui .opblock-summary-path {
        font-family: var(--font-family-mono) !important;
        color: var(--text-primary) !important;
        font-weight: 600 !important;
        font-size: 13px !important;
        word-break: break-all !important;
      }

      @media (min-width: 768px) {
        .swagger-ui .opblock-summary-path {
          font-size: 15px !important;
          word-break: normal !important;
        }
      }

      .swagger-ui .opblock-summary-description {
        color: var(--text-secondary) !important;
        font-size: 13px !important;
        line-height: 1.5 !important;
        margin-top: 4px !important;
      }

      @media (min-width: 768px) {
        .swagger-ui .opblock-summary-description {
          font-size: 14px !important;
        }
      }

      .swagger-ui .opblock-summary .arrow {
        transition: transform 0.2s ease !important;
      }

      .swagger-ui .opblock.is-open .opblock-summary .arrow {
        transform: rotate(90deg) !important;
      }

      /* Clean Operation Tags */
      .swagger-ui .opblock-tag-section {
        margin-bottom: 24px !important;
      }

      .swagger-ui .opblock-tag {
        border: none !important;
        border-bottom: 2px solid var(--border-color) !important;
        color: var(--text-primary) !important;
        font-family: var(--font-family-mono) !important;
        font-size: 1.4em !important;
        font-weight: 700 !important;
        padding: 24px 0 12px 0 !important;
        margin: 32px 0 20px 0 !important;
        position: relative !important;
      }

      @media (min-width: 768px) {
        .swagger-ui .opblock-tag {
          font-size: 1.6em !important;
          padding: 28px 0 14px 0 !important;
        }
      }

      .swagger-ui .opblock-tag:first-child {
        margin-top: 0 !important;
      }

      .swagger-ui .opblock-tag::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 60px;
        height: 2px;
        background: var(--text-accent);
      }

      .swagger-ui .opblock-tag small {
        color: var(--text-secondary) !important;
        font-size: 0.6em !important;
        font-weight: 500 !important;
        display: block !important;
        margin-top: 6px !important;
      }

      /* Parameters Section */
      .swagger-ui .parameters-col_description {
        color: var(--text-secondary) !important;
      }

      .swagger-ui table {
        border-radius: var(--border-radius-md) !important;
        overflow: hidden !important;
      }

      .swagger-ui table thead tr th {
        color: var(--text-accent) !important;
        background: var(--bg-tertiary) !important;
        font-family: var(--font-family-mono) !important;
        font-weight: 600 !important;
        font-size: 14px !important;
        padding: 14px 12px !important;
        border-bottom: 2px solid var(--border-color) !important;
      }

      .swagger-ui table tbody tr td {
        color: var(--text-primary) !important;
        border-color: var(--border-color) !important;
        padding: 12px !important;
        font-size: 14px !important;
      }

      .swagger-ui table tbody tr:hover {
        background: var(--bg-hover) !important;
      }

      /* Parameter Names */
      .swagger-ui .parameter__name {
        color: var(--text-accent) !important;
        font-family: var(--font-family-mono) !important;
        font-weight: 600 !important;
        font-size: 14px !important;
      }

      .swagger-ui .parameter__name.required::after {
        color: #f93e3e !important;
        font-size: 12px !important;
      }

      .swagger-ui .parameter__type {
        color: var(--text-secondary) !important;
        font-family: var(--font-family-mono) !important;
        font-size: 13px !important;
      }

      /* Input Fields */
      .swagger-ui input[type=text],
      .swagger-ui input[type=number],
      .swagger-ui textarea,
      .swagger-ui select {
        background: var(--input-bg) !important;
        border: 2px solid var(--border-color) !important;
        color: var(--text-primary) !important;
        border-radius: var(--border-radius-md) !important;
        font-family: var(--font-family-mono) !important;
        padding: 10px 12px !important;
        transition: all 0.3s ease !important;
      }

      .swagger-ui input[type=text]:focus,
      .swagger-ui input[type=number]:focus,
      .swagger-ui textarea:focus,
      .swagger-ui select:focus {
        outline: none !important;
        border-color: var(--text-accent) !important;
        box-shadow: 0 0 0 3px var(--bg-hover) !important;
      }

      /* Buttons */
      .swagger-ui .btn {
        font-family: var(--font-family-mono) !important;
        border-radius: var(--border-radius-md) !important;
        padding: 10px 20px !important;
        font-weight: 600 !important;
        font-size: 14px !important;
        transition: all 0.3s ease !important;
        cursor: pointer !important;
      }

      .swagger-ui .btn.execute {
        background: var(--text-accent) !important;
        border-color: var(--text-accent) !important;
        color: white !important;
        box-shadow: 0 2px 8px rgba(168, 85, 247, 0.3) !important;
      }

      .swagger-ui .btn.execute:hover {
        background: var(--text-link) !important;
        border-color: var(--text-link) !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 4px 12px rgba(168, 85, 247, 0.4) !important;
      }

      .swagger-ui .btn.try-out__btn {
        background: var(--bg-tertiary) !important;
        border: 2px solid var(--border-color) !important;
        color: var(--text-accent) !important;
      }

      .swagger-ui .btn.try-out__btn:hover {
        background: var(--bg-hover) !important;
        border-color: var(--text-accent) !important;
      }

      .swagger-ui .btn.cancel {
        background: var(--bg-tertiary) !important;
        border: 2px solid var(--border-color) !important;
        color: var(--text-secondary) !important;
      }

      .swagger-ui .btn.cancel:hover {
        background: rgba(239, 68, 68, 0.1) !important;
        border-color: #f93e3e !important;
        color: #f93e3e !important;
      }

      /* Clean Authorize Button */
      .swagger-ui .btn.authorize {
        background: var(--text-accent) !important;
        border: none !important;
        color: white !important;
        font-weight: 600 !important;
        padding: 8px 16px !important;
        border-radius: 6px !important;
        transition: all 0.2s ease !important;
      }

      .swagger-ui .btn.authorize:hover {
        background: var(--text-link) !important;
        transform: translateY(-1px) !important;
      }

      .swagger-ui .btn.authorize svg {
        fill: white !important;
      }

      .swagger-ui .btn.authorize.locked {
        background: #10b981 !important;
      }

      .swagger-ui .btn.authorize.locked:hover {
        background: #059669 !important;
      }

      /* Response Section */
      .swagger-ui .responses-wrapper {
        margin-top: 24px !important;
        padding-top: 24px !important;
        border-top: 2px solid var(--border-color) !important;
      }

      .swagger-ui .response-col_status {
        color: var(--text-accent) !important;
        font-family: var(--font-family-mono) !important;
        font-weight: 600 !important;
      }

      .swagger-ui .response-col_description {
        color: var(--text-secondary) !important;
      }

      /* Code/Response Display */
      .swagger-ui .highlight-code {
        background: var(--bg-tertiary) !important;
        border: 1px solid var(--border-color) !important;
        border-radius: var(--border-radius-md) !important;
      }

      .swagger-ui .highlight-code > pre,
      .swagger-ui .microlight {
        background: var(--bg-tertiary) !important;
        color: var(--text-primary) !important;
        font-family: var(--font-family-mono) !important;
        padding: 16px !important;
        border-radius: var(--border-radius-md) !important;
      }

      /* Enhanced Schemas Section */
      .swagger-ui .models {
        margin-top: 48px !important;
        padding-top: 32px !important;
        border-top: 3px solid var(--border-color) !important;
        position: relative !important;
      }

      .swagger-ui .models::before {
        content: '';
        position: absolute;
        top: -3px;
        left: 0;
        width: 120px;
        height: 3px;
        background: var(--accent-gradient);
        border-radius: 2px;
      }

      .swagger-ui .models h4 {
        color: var(--text-primary) !important;
        font-family: var(--font-family-mono) !important;
        font-size: 1.8em !important;
        font-weight: 700 !important;
        padding: 0 0 16px 0 !important;
        margin: 0 0 24px 0 !important;
        border-bottom: 3px solid var(--border-color) !important;
        position: relative !important;
      }

      .swagger-ui .models h4::before {
        content: 'üìö ';
        margin-right: 12px;
        font-size: 1em;
      }

      .swagger-ui .models h4::after {
        content: '';
        position: absolute;
        bottom: -3px;
        left: 0;
        width: 100px;
        height: 3px;
        background: var(--accent-gradient);
        border-radius: 2px;
      }

      /* Schema Container */
      .swagger-ui .model-container {
        margin-bottom: 20px !important;
        border-radius: 12px !important;
        overflow: hidden !important;
        background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%) !important;
        border: 2px solid var(--border-color) !important;
        border-left: 5px solid var(--text-accent) !important;
        box-shadow: 0 2px 8px var(--shadow-light) !important;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
      }

      .swagger-ui .model-container:hover {
        box-shadow: 0 8px 24px var(--shadow-medium) !important;
        transform: translateY(-2px) !important;
        border-left-color: var(--text-link) !important;
      }

      /* Schema Title */
      .swagger-ui .model-title {
        color: var(--text-accent) !important;
        font-family: var(--font-family-mono) !important;
        font-weight: 700 !important;
        font-size: 18px !important;
        display: flex !important;
        align-items: center !important;
        gap: 12px !important;
        cursor: pointer !important;
        padding: 18px 20px !important;
        background: var(--bg-secondary) !important;
        border-bottom: 2px solid var(--border-color) !important;
        transition: all 0.3s ease !important;
        margin: 0 !important;
      }

      .swagger-ui .model-title:hover {
        background: var(--bg-hover) !important;
        border-bottom-color: var(--text-accent) !important;
      }

      .swagger-ui .model-title::before {
        content: 'üì¶';
        font-size: 20px;
        display: inline-block;
      }

      /* Schema Toggle Icon */
      .swagger-ui .model-toggle {
        color: var(--text-accent) !important;
        font-size: 16px !important;
        transition: transform 0.3s ease !important;
        display: inline-flex !important;
        align-items: center !important;
        justify-content: center !important;
        width: 28px !important;
        height: 28px !important;
        border-radius: 6px !important;
        background: var(--bg-tertiary) !important;
        margin-left: auto !important;
        flex-shrink: 0 !important;
      }

      .swagger-ui .model-toggle:hover {
        background: var(--text-accent) !important;
        color: white !important;
      }

      /* Schema Content */
      .swagger-ui .model-box {
        background: transparent !important;
        border: none !important;
        padding: 0 !important;
        margin: 0 !important;
      }

      .swagger-ui .model {
        background: transparent !important;
        border: none !important;
        padding: 20px !important;
        margin: 0 !important;
        font-family: var(--font-family-mono) !important;
        font-size: 14px !important;
      }

      /* Schema Properties */
      .swagger-ui .model .property {
        color: var(--text-primary) !important;
        padding: 12px 14px !important;
        margin: 6px 0 !important;
        background: var(--bg-secondary) !important;
        border-radius: 8px !important;
        border-left: 3px solid var(--border-color) !important;
        transition: all 0.3s ease !important;
        display: block !important;
      }

      .swagger-ui .model .property:hover {
        background: var(--bg-hover) !important;
        border-left-color: var(--text-accent) !important;
        transform: translateX(4px) !important;
      }

      .swagger-ui .model .property.primitive {
        color: var(--text-secondary) !important;
      }

      /* Property Names */
      .swagger-ui .prop-name {
        color: var(--text-accent) !important;
        font-weight: 600 !important;
        font-size: 14px !important;
      }

      /* Property Types */
      .swagger-ui .prop-type {
        color: var(--text-secondary) !important;
        font-size: 13px !important;
        font-style: italic !important;
        margin-left: 8px !important;
      }

      /* Required Indicator */
      .swagger-ui .prop-name.required::after {
        content: ' *';
        color: #f93e3e !important;
        font-weight: 700 !important;
      }

      /* Property Format */
      .swagger-ui .prop-format {
        color: var(--text-secondary) !important;
        font-size: 12px !important;
        margin-left: 4px !important;
      }

      /* Nested Objects */
      .swagger-ui .model-children {
        margin-left: 16px !important;
        padding-left: 16px !important;
        border-left: 2px solid var(--border-color) !important;
        margin-top: 8px !important;
      }

      /* Array/Object Braces */
      .swagger-ui .brace-open,
      .swagger-ui .brace-close {
        color: var(--text-accent) !important;
        font-weight: 700 !important;
        font-size: 16px !important;
      }

      /* Description */
      .swagger-ui .model-description {
        color: var(--text-secondary) !important;
        font-size: 13px !important;
        line-height: 1.6 !important;
        margin-top: 6px !important;
        font-style: italic !important;
      }

      /* Example Values */
      .swagger-ui .model-example {
        background: var(--bg-tertiary) !important;
        border: 1px solid var(--border-color) !important;
        border-radius: 6px !important;
        padding: 12px !important;
        margin-top: 12px !important;
        font-family: var(--font-family-mono) !important;
        font-size: 13px !important;
      }

      /* Copy Button */
      .swagger-ui .copy-to-clipboard {
        position: absolute !important;
        right: 8px !important;
        top: 8px !important;
      }

      .swagger-ui .copy-to-clipboard button {
        background: var(--bg-secondary) !important;
        border: 1px solid var(--border-color) !important;
        color: var(--text-accent) !important;
        border-radius: var(--border-radius-sm) !important;
        padding: 6px 10px !important;
        transition: all 0.3s ease !important;
      }

      .swagger-ui .copy-to-clipboard button:hover {
        background: var(--text-accent) !important;
        color: white !important;
      }

      /* Clean Filter/Search Box */
      .swagger-ui .filter-container {
        margin-bottom: 24px !important;
      }

      .swagger-ui .filter .operation-filter-input {
        background: var(--input-bg) !important;
        border: 1px solid var(--border-color) !important;
        color: var(--text-primary) !important;
        padding: 10px 16px !important;
        border-radius: 6px !important;
        font-family: var(--font-family-mono) !important;
        font-size: 14px !important;
        width: 100% !important;
        transition: all 0.2s ease !important;
      }

      @media (min-width: 768px) {
        .swagger-ui .filter .operation-filter-input {
          max-width: 500px !important;
        }
      }

      [data-theme="dark"] .swagger-ui .filter .operation-filter-input {
        background: var(--bg-tertiary) !important;
        border-color: var(--border-color) !important;
        color: var(--text-primary) !important;
      }

      .swagger-ui .filter .operation-filter-input::placeholder {
        color: var(--text-tertiary) !important;
      }

      .swagger-ui .filter .operation-filter-input:focus {
        outline: none !important;
        border-color: var(--text-accent) !important;
        box-shadow: 0 0 0 3px var(--bg-hover) !important;
      }

      /* Markdown in descriptions */
      .swagger-ui .renderedMarkdown p {
        color: var(--text-secondary) !important;
        line-height: 1.8 !important;
      }

      .swagger-ui .renderedMarkdown code {
        background: var(--bg-tertiary) !important;
        color: var(--text-accent) !important;
        padding: 2px 6px !important;
        border-radius: 4px !important;
        font-family: var(--font-family-mono) !important;
      }

      .swagger-ui .renderedMarkdown pre {
        background: var(--bg-tertiary) !important;
        border: 1px solid var(--border-color) !important;
        border-radius: var(--border-radius-md) !important;
        padding: 12px !important;
      }

      /* Loading Spinner */
      .swagger-ui .loading-container {
        color: var(--text-accent) !important;
      }

      /* Scrollbar customization */
      .swagger-ui ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }

      .swagger-ui ::-webkit-scrollbar-track {
        background: var(--bg-secondary);
        border-radius: 5px;
      }

      .swagger-ui ::-webkit-scrollbar-thumb {
        background: var(--border-color);
        border-radius: 5px;
        transition: background 0.3s ease;
      }

      .swagger-ui ::-webkit-scrollbar-thumb:hover {
        background: var(--text-secondary);
      }

      /* Dark theme adjustments */
      [data-theme="dark"] .swagger-ui {
        filter: none !important;
      }

      [data-theme="dark"] .swagger-ui .scheme-container {
        background: var(--bg-tertiary) !important;
        box-shadow: 0 2px 8px var(--shadow-medium) !important;
      }

      /* Hide TOC for Swagger pages */
      .toc {
        display: none;
      }

      /* Expand content area when TOC is hidden */
      body.swagger-view {
        grid-template-columns: 280px 1fr;
        grid-template-areas:
          "navbar navbar"
          "sidebar content";
      }

      body.swagger-view.sidebar-collapsed {
        grid-template-columns: 56px 1fr;
      }

      /* Operation Body Content */
      .swagger-ui .opblock-body {
        padding: 28px !important;
        background: var(--bg-secondary) !important;
      }

      .swagger-ui .opblock-section {
        padding: 0 !important;
      }

      .swagger-ui .opblock-section-header {
        background: var(--bg-tertiary) !important;
        padding: 16px 20px !important;
        border-radius: 8px !important;
        margin-bottom: 16px !important;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05) !important;
      }

      .swagger-ui .opblock-section-header h4 {
        color: var(--text-accent) !important;
        font-family: var(--font-family-mono) !important;
        font-weight: 700 !important;
        font-size: 16px !important;
        margin: 0 !important;
      }

      /* Tab navigation */
      .swagger-ui .tab {
        padding: 12px 20px !important;
        font-family: var(--font-family-mono) !important;
        font-weight: 600 !important;
        transition: all 0.3s ease !important;
      }

      .swagger-ui .tab.active {
        background: var(--text-accent) !important;
        color: white !important;
        border-radius: 8px 8px 0 0 !important;
      }

      /* Deprecated indicator */
      .swagger-ui .opblock.opblock-deprecated {
        opacity: 0.6 !important;
        border-color: #f59e0b !important;
      }

      .swagger-ui .opblock.opblock-deprecated .opblock-summary-path {
        text-decoration: line-through !important;
      }

      .swagger-ui .opblock.opblock-deprecated::after {
        content: '‚ö†Ô∏è DEPRECATED';
        position: absolute;
        top: 20px;
        right: 28px;
        background: #fbbf24 !important;
        color: #78350f !important;
        padding: 4px 12px;
        border-radius: 6px;
        font-size: 11px;
        font-weight: 700;
        letter-spacing: 0.5px;
      }

      /* Mobile optimizations - Already handled above with @media queries */
      @media (max-width: 767px) {
        /* Tables responsive */
        .swagger-ui table {
          display: block !important;
          overflow-x: auto !important;
          -webkit-overflow-scrolling: touch !important;
        }

        /* Reduce button padding on mobile */
        .swagger-ui .btn {
          padding: 8px 12px !important;
          font-size: 13px !important;
        }

        /* Stack model containers */
        .swagger-ui .model-container {
          margin-bottom: 16px !important;
        }
      }
    </style>
  </head>
  <body class="swagger-view">
    <nav class="navbar">
      <div class="navbar-left">
        <button
          class="sidebar-toggle"
          onclick="toggleSidebar()"
          title="Toggle sidebar"
        >
          <span id="sidebar-icon">‚ò∞</span>
        </button>
        <div class="navbar-logo">
          <div class="navbar-logo-icon">
            <img
              src="/static/duckdoclogo.ico"
              alt="DuckDoc Logo"
              class="logo-svg"
            />
          </div>
          <span>DuckDoc</span>
        </div>
        <div class="navbar-file-path">
          {{ if .CurrentFile }}
          <span class="file-name">{{ .CurrentFile }}</span>
          {{ else }}
          <span class="file-name">API Documentation</span>
          {{ end }}
        </div>
      </div>
      <div class="navbar-right">
        <button
          class="theme-toggle"
          onclick="toggleTheme()"
          title="Toggle theme"
        >
          <span id="theme-icon">üåô</span>
        </button>
        <a href="/" class="navbar-home-link">Home</a>
      </div>
    </nav>
    {{ template "sidebar.html" . }}
    <main class="content swagger-container">
      <div id="swagger-ui"></div>
    </main>

    <script src="https://unpkg.com/swagger-ui-dist@5.10.3/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.10.3/swagger-ui-standalone-preset.js"></script>
    <script>
      window.onload = function() {
        // Get the current file path
        const currentFile = "{{ .CurrentFile }}";
        const specUrl = "/content/" + currentFile;

        // Initialize Swagger UI
        window.ui = SwaggerUIBundle({
          url: specUrl,
          dom_id: '#swagger-ui',
          deepLinking: true,
          presets: [
            SwaggerUIBundle.presets.apis,
            SwaggerUIStandalonePreset
          ],
          plugins: [
            SwaggerUIBundle.plugins.DownloadUrl
          ],
          layout: "BaseLayout",
          defaultModelsExpandDepth: -1, // Collapse all schemas by default
          defaultModelExpandDepth: 1,
          docExpansion: "list",
          filter: true,
          showRequestHeaders: true,
          supportedSubmitMethods: ['get', 'post', 'put', 'delete', 'patch', 'head', 'options'],
          tryItOutEnabled: true,
          requestInterceptor: (request) => {
            console.log('Request:', request);
            return request;
          },
          responseInterceptor: (response) => {
            console.log('Response:', response);
            return response;
          },
          onComplete: () => {
            console.log('Swagger UI loaded successfully');
            enhanceSchemas();
          }
        });
      };

      // Enhance schemas section after Swagger UI loads
      function enhanceSchemas() {
        setTimeout(() => {
          // Add expand/collapse all buttons
          const modelsSection = document.querySelector('.swagger-ui .models');
          if (modelsSection && !document.querySelector('.schemas-controls')) {
            const controlsDiv = document.createElement('div');
            controlsDiv.className = 'schemas-controls';
            controlsDiv.style.cssText = `
              margin-bottom: 20px;
              display: flex;
              gap: 12px;
              flex-wrap: wrap;
            `;
            
            const expandAllBtn = createSchemaButton('üìÇ Expand All Schemas', () => {
              expandAllSchemas();
            });
            
            const collapseAllBtn = createSchemaButton('üìÅ Collapse All Schemas', () => {
              collapseAllSchemas();
            });
            
            controlsDiv.appendChild(expandAllBtn);
            controlsDiv.appendChild(collapseAllBtn);
            
            // Insert after the h4 title
            const title = modelsSection.querySelector('h4, h5');
            if (title) {
              title.after(controlsDiv);
            } else {
              modelsSection.insertBefore(controlsDiv, modelsSection.firstChild);
            }
          }

          // Add schema count badge
          updateSchemaCount();
        }, 500);
      }

      // Create styled button
      function createSchemaButton(text, onClick) {
        const btn = document.createElement('button');
        btn.textContent = text;
        btn.className = 'btn schemas-btn';
        btn.style.cssText = `
          background: var(--bg-tertiary) !important;
          border: 2px solid var(--border-color) !important;
          color: var(--text-accent) !important;
          padding: 10px 16px !important;
          border-radius: 8px !important;
          font-family: var(--font-family-mono) !important;
          font-weight: 600 !important;
          font-size: 14px !important;
          cursor: pointer !important;
          transition: all 0.3s ease !important;
        `;
        
        btn.addEventListener('click', onClick);
        
        btn.addEventListener('mouseenter', () => {
          btn.style.background = 'var(--bg-hover) !important';
          btn.style.borderColor = 'var(--text-accent) !important';
          btn.style.transform = 'translateY(-2px)';
          btn.style.boxShadow = '0 4px 12px rgba(168, 85, 247, 0.3)';
        });
        
        btn.addEventListener('mouseleave', () => {
          btn.style.background = 'var(--bg-tertiary) !important';
          btn.style.borderColor = 'var(--border-color) !important';
          btn.style.transform = 'translateY(0)';
          btn.style.boxShadow = 'none';
        });
        
        return btn;
      }

      // Expand all schemas
      function expandAllSchemas() {
        const modelToggles = document.querySelectorAll('.swagger-ui .model-container .model-toggle');
        modelToggles.forEach(toggle => {
          const isCollapsed = toggle.closest('.model-container').classList.contains('is-collapsed');
          if (isCollapsed) {
            toggle.click();
          }
        });
      }

      // Collapse all schemas
      function collapseAllSchemas() {
        const modelToggles = document.querySelectorAll('.swagger-ui .model-container .model-toggle');
        modelToggles.forEach(toggle => {
          const isCollapsed = toggle.closest('.model-container').classList.contains('is-collapsed');
          if (!isCollapsed) {
            toggle.click();
          }
        });
      }

      // Update schema count badge
      function updateSchemaCount() {
        const schemaCount = document.querySelectorAll('.swagger-ui .model-container').length;
        const title = document.querySelector('.swagger-ui .models h4, .swagger-ui .models h5');
        
        if (title && schemaCount > 0 && !title.querySelector('.schema-count')) {
          const badge = document.createElement('span');
          badge.className = 'schema-count';
          badge.textContent = schemaCount;
          badge.style.cssText = `
            background: var(--text-accent);
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            margin-left: 12px;
            display: inline-block;
            box-shadow: 0 2px 6px rgba(168, 85, 247, 0.4);
          `;
          title.appendChild(badge);
        }
      }
    </script>
  </body>
</html>
{{ end }}

